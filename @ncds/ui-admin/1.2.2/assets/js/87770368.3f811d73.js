"use strict";(self.webpackChunkncds_admin_docs=self.webpackChunkncds_admin_docs||[]).push([[27343],{34391:(n,e,t)=>{t.r(e),t.d(e,{CustomUploadDemo:()=>p,assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>m});const o=JSON.parse('{"id":"editor/image/custom-upload","title":"\ucee4\uc2a4\ud140 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc","description":"customImageUploadOptions\ub97c \uc774\uc6a9\ud558\uc5ec \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \ub85c\uc9c1\uc744 \uc644\uc804\ud788 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\ud558\ub294 \ubc29\ubc95\uc744 \uc54c\uc544\ubcf4\uc138\uc694.","source":"@site/docs/editor/image/custom-upload.mdx","sourceDirName":"editor/image","slug":"/editor/image/custom-upload","permalink":"/admin-ui-archive/@ncds/ui-admin/1.2.2/docs/editor/image/custom-upload","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"\ucee4\uc2a4\ud140 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc","description":"customImageUploadOptions\ub97c \uc774\uc6a9\ud558\uc5ec \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \ub85c\uc9c1\uc744 \uc644\uc804\ud788 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\ud558\ub294 \ubc29\ubc95\uc744 \uc54c\uc544\ubcf4\uc138\uc694.","sidebar_label":"\ucee4\uc2a4\ud140 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc","sidebar_position":2,"displayed_sidebar":"editor"},"sidebar":"editor","previous":{"title":"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc","permalink":"/admin-ui-archive/@ncds/ui-admin/1.2.2/docs/editor/image/upload"}}');var a=t(74848),i=t(55569),s=t(96540),r=t(36212);const l={title:"\ucee4\uc2a4\ud140 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc",description:"customImageUploadOptions\ub97c \uc774\uc6a9\ud558\uc5ec \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \ub85c\uc9c1\uc744 \uc644\uc804\ud788 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\ud558\ub294 \ubc29\ubc95\uc744 \uc54c\uc544\ubcf4\uc138\uc694.",sidebar_label:"\ucee4\uc2a4\ud140 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc",sidebar_position:2,displayed_sidebar:"editor"},d="\ucee4\uc2a4\ud140 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc",c={},p=()=>{const[n,e]=(0,s.useState)("<p>\ucee4\uc2a4\ud140 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\ub97c \ud14c\uc2a4\ud2b8\ud574\ubcf4\uc138\uc694!</p>"),[o,i]=(0,s.useState)([]),[l,d]=(0,s.useState)(!0),[c,p]=(0,s.useState)(800),m=n=>{i((e=>[...e.slice(-4),`${(new Date).toLocaleTimeString()} ${n}`]))},g={imageBeforeUpload:(n,e,t)=>{const o=e[0];if(o.size>2097152)return void m("\u274c \ud30c\uc77c \ud06c\uae30\uac00 2MB\ub97c \ucd08\uacfc\ud569\ub2c8\ub2e4.");if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(o.type))return void m("\u274c \ud5c8\uc6a9\ub418\uc9c0 \uc54a\ub294 \ud30c\uc77c \ud615\uc2dd\uc785\ub2c8\ub2e4.");m(`\ud83d\udce4 ${o.name} \ucc98\ub9ac \uc2dc\uc791... (${(o.size/1024).toFixed(1)}KB)`);(async()=>{try{let n=o;if(l&&o.type.startsWith("image/")&&"image/gif"!==o.type){m(`\ud83d\udd04 \uc774\ubbf8\uc9c0 \uc555\ucd95 \uc911... (\ucd5c\ub300 \ub108\ube44: ${c}px)`),n=await((n,e,t=.8)=>new Promise((o=>{const a=document.createElement("canvas"),i=a.getContext("2d"),s=new Image;s.onload=()=>{const n=Math.min(e/s.width,e/s.height);a.width=s.width*n,a.height=s.height*n,i.drawImage(s,0,0,a.width,a.height),a.toBlob(o,"image/jpeg",t)},s.src=URL.createObjectURL(n)})))(o,c,.8);const e=Math.round(100*(1-n.size/o.size));m(`\u2702\ufe0f \uc555\ucd95 \uc644\ub8cc! ${e}% \uac10\uc18c (${(n.size/1024).toFixed(1)}KB)`)}const e=new FileReader;e.onload=n=>{setTimeout((()=>{const e=n.target.result;m(`\u2705 ${o.name} \uc5c5\ub85c\ub4dc \uc644\ub8cc!`),t(e,!1,{},null,{})}),800+800*Math.random())},e.onerror=()=>{m("\u274c \ud30c\uc77c \uc77d\uae30 \uc2e4\ud328")},e.readAsDataURL(n)}catch(n){m(`\u274c \uc624\ub958: ${n.message}`)}})()},preventDefaultUpload:!0};return(0,a.jsxs)("div",{style:{border:"1px solid #e1e5e9",borderRadius:"8px",padding:"16px",marginBottom:"16px"},children:[(0,a.jsx)("div",{style:{marginBottom:"12px",fontSize:"14px",color:"#6c757d"},children:"\ud83d\udca1 \uc2e4\uc81c \ud30c\uc77c\ub85c \ucee4\uc2a4\ud140 \uc5c5\ub85c\ub4dc \ub85c\uc9c1\uc744 \ud14c\uc2a4\ud2b8\ud574\ubcf4\uc138\uc694! (\ub85c\uceec \ucc98\ub9ac)"}),(0,a.jsxs)("div",{style:{marginBottom:"12px",padding:"8px",backgroundColor:"#f8f9fa",borderRadius:"4px",border:"1px solid #e9ecef"},children:[(0,a.jsx)("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"8px"},children:"\ucee4\uc2a4\ud140 \uc124\uc815:"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[(0,a.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px"},children:[(0,a.jsx)("input",{type:"checkbox",checked:l,onChange:n=>d(n.target.checked)}),"\uc774\ubbf8\uc9c0 \uc555\ucd95 \ud65c\uc131\ud654"]}),l&&(0,a.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px"},children:["\ucd5c\ub300 \ub108\ube44:",(0,a.jsx)("input",{type:"number",value:c,onChange:n=>p(Number(n.target.value)),min:"200",max:"2000",step:"100",style:{width:"60px",padding:"2px 4px"}}),"px"]})]})]}),(0,a.jsx)(r.A,{fallback:(0,a.jsx)("div",{children:"\ub85c\ub529 \uc911..."}),children:()=>{const{FroalaEditor:o}=t(88851);return(0,a.jsx)(o,{value:n,onChange:e,height:250,customImageUploadOptions:g,toolbarButtons:["bold","italic","underline","|","insertImage","insertLink","|","undo","redo"]})}}),o.length>0&&(0,a.jsxs)("div",{style:{marginTop:"12px",padding:"8px",backgroundColor:"#f8f9fa",borderRadius:"4px",fontSize:"11px",maxHeight:"120px",overflowY:"auto"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[(0,a.jsx)("strong",{children:"\uc5c5\ub85c\ub4dc \ub85c\uadf8:"}),(0,a.jsx)("button",{onClick:()=>{i([])},style:{padding:"2px 6px",fontSize:"10px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"2px",cursor:"pointer"},children:"\uc9c0\uc6b0\uae30"})]}),o.map(((n,e)=>(0,a.jsx)("div",{style:{marginBottom:"2px"},children:n},e)))]})]})},m=[{value:"\uc2e4\uc81c \ub3d9\uc791 \uc608\uc81c",id:"\uc2e4\uc81c-\ub3d9\uc791-\uc608\uc81c",level:2},{value:"\uae30\ubcf8 \uc0ac\uc6a9\ubc95",id:"\uae30\ubcf8-\uc0ac\uc6a9\ubc95",level:2},{value:"\uc5b8\uc81c \ucee4\uc2a4\ud140 \uc5c5\ub85c\ub4dc\ub97c \uc0ac\uc6a9\ud574\uc57c \ud560\uae4c?",id:"\uc5b8\uc81c-\ucee4\uc2a4\ud140-\uc5c5\ub85c\ub4dc\ub97c-\uc0ac\uc6a9\ud574\uc57c-\ud560\uae4c",level:2},{value:"\ud83d\udd04 \uc11c\ubc84 \uc751\ub2f5 \ud615\uc2dd\uc774 \ub2e4\ub978 \uacbd\uc6b0",id:"-\uc11c\ubc84-\uc751\ub2f5-\ud615\uc2dd\uc774-\ub2e4\ub978-\uacbd\uc6b0",level:3},{value:"\ud83d\udcdd \ud30c\uc77c\uba85 \uc790\ub3d9 \ubcc0\uacbd\uc774 \ud544\uc694\ud55c \uacbd\uc6b0",id:"-\ud30c\uc77c\uba85-\uc790\ub3d9-\ubcc0\uacbd\uc774-\ud544\uc694\ud55c-\uacbd\uc6b0",level:3},{value:"\ud83d\udd04 \uc5ec\ub7ec \uc11c\ubc84 \uc911 \uc120\ud0dd\uc774 \ud544\uc694\ud55c \uacbd\uc6b0",id:"-\uc5ec\ub7ec-\uc11c\ubc84-\uc911-\uc120\ud0dd\uc774-\ud544\uc694\ud55c-\uacbd\uc6b0",level:3},{value:"\uace0\uae09 \ucee4\uc2a4\ud140 \uc5c5\ub85c\ub4dc \uc608\uc81c",id:"\uace0\uae09-\ucee4\uc2a4\ud140-\uc5c5\ub85c\ub4dc-\uc608\uc81c",level:2},{value:"\uc9c4\ud589\ub960 \ud45c\uc2dc\uac00 \uc788\ub294 \uc5c5\ub85c\ub4dc",id:"\uc9c4\ud589\ub960-\ud45c\uc2dc\uac00-\uc788\ub294-\uc5c5\ub85c\ub4dc",level:3},{value:"\uc774\ubbf8\uc9c0 \uc555\ucd95 \ubc0f \ub9ac\uc0ac\uc774\uc9d5",id:"\uc774\ubbf8\uc9c0-\uc555\ucd95-\ubc0f-\ub9ac\uc0ac\uc774\uc9d5",level:3},{value:"\uc6cc\ud130\ub9c8\ud06c \ucd94\uac00 \uc5c5\ub85c\ub4dc",id:"\uc6cc\ud130\ub9c8\ud06c-\ucd94\uac00-\uc5c5\ub85c\ub4dc",level:3},{value:"\uc624\ub958 \ucc98\ub9ac \ubc0f \uc0ac\uc6a9\uc790 \ud53c\ub4dc\ubc31",id:"\uc624\ub958-\ucc98\ub9ac-\ubc0f-\uc0ac\uc6a9\uc790-\ud53c\ub4dc\ubc31",level:2},{value:"\ud3ec\uad04\uc801\uc778 \uc624\ub958 \ucc98\ub9ac",id:"\ud3ec\uad04\uc801\uc778-\uc624\ub958-\ucc98\ub9ac",level:3},{value:"\uc8fc\uc694 \ud65c\uc6a9 \uc0ac\ub840",id:"\uc8fc\uc694-\ud65c\uc6a9-\uc0ac\ub840",level:2},{value:"1. \uc11c\ubc84 \uc751\ub2f5 \ud615\uc2dd\uc774 \ud45c\uc900\uacfc \ub2e4\ub978 \uacbd\uc6b0",id:"1-\uc11c\ubc84-\uc751\ub2f5-\ud615\uc2dd\uc774-\ud45c\uc900\uacfc-\ub2e4\ub978-\uacbd\uc6b0",level:3},{value:"2. \ud30c\uc77c \ucc98\ub9ac\uac00 \ud544\uc694\ud55c \uacbd\uc6b0",id:"2-\ud30c\uc77c-\ucc98\ub9ac\uac00-\ud544\uc694\ud55c-\uacbd\uc6b0",level:3},{value:"3. \uc5c5\ub85c\ub4dc \uc11c\ubc84 \uc120\ud0dd\uc774 \ud544\uc694\ud55c \uacbd\uc6b0",id:"3-\uc5c5\ub85c\ub4dc-\uc11c\ubc84-\uc120\ud0dd\uc774-\ud544\uc694\ud55c-\uacbd\uc6b0",level:3},{value:"4. \ud2b9\ubcc4\ud55c \uac80\uc99d\uc774 \ud544\uc694\ud55c \uacbd\uc6b0",id:"4-\ud2b9\ubcc4\ud55c-\uac80\uc99d\uc774-\ud544\uc694\ud55c-\uacbd\uc6b0",level:3}];function g(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"\ucee4\uc2a4\ud140-\uc774\ubbf8\uc9c0-\uc5c5\ub85c\ub4dc",children:"\ucee4\uc2a4\ud140 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"customImageUploadOptions"}),"\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \ub85c\uc9c1\uc744 \uc644\uc804\ud788 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc11c\ubc84 \uc751\ub2f5 \ud615\uc2dd\uc774 ",(0,a.jsx)(e.code,{children:'{ "link": "URL" }'}),"\uc774 \uc544\ub2c8\uac70\ub098, \ubcf5\uc7a1\ud55c \uc5c5\ub85c\ub4dc \ub85c\uc9c1\uc774 \ud544\uc694\ud55c \uacbd\uc6b0\uc5d0 \uc0ac\uc6a9\ud569\ub2c8\ub2e4."]}),"\n",(0,a.jsx)(e.h2,{id:"\uc2e4\uc81c-\ub3d9\uc791-\uc608\uc81c",children:"\uc2e4\uc81c \ub3d9\uc791 \uc608\uc81c"}),"\n",(0,a.jsx)(p,{}),"\n",(0,a.jsx)(e.h2,{id:"\uae30\ubcf8-\uc0ac\uc6a9\ubc95",children:"\uae30\ubcf8 \uc0ac\uc6a9\ubc95"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:"// param \uc124\uba85\n// editor: FroalaEditor \uc778\uc2a4\ud134\uc2a4\n// fileList: \uc5c5\ub85c\ub4dc\ud560 \ud30c\uc77c \ubaa9\ub85d ( file[] )\n// insertImage: \uc774\ubbf8\uc9c0 \uc0bd\uc785 \ud568\uc218 (\ucc38\uace0: https://froala.com/wysiwyg-editor/docs/methods/#image-insert-link-sanitize-data-existing_image-response)\n\nconst customUploadOptions = {\n  imageBeforeUpload: async (editor, fileList, insertImage) => {\n    // \ucee4\uc2a4\ud140 \uc5c5\ub85c\ub4dc \ub85c\uc9c1\n    const imageUrl = await uploadToServer(fileList[0]); // \uc11c\ubc84\uc5d0 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\n    insertImage(imageUrl, false, {}, null, {}); // \uc774\ubbf8\uc9c0 \uc0bd\uc785\n  },\n};\n\n<FroalaEditor\n  customImageUploadOptions={customUploadOptions}\n  // ... \uae30\ud0c0 \uc18d\uc131\n/>;\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\uc5b8\uc81c-\ucee4\uc2a4\ud140-\uc5c5\ub85c\ub4dc\ub97c-\uc0ac\uc6a9\ud574\uc57c-\ud560\uae4c",children:"\uc5b8\uc81c \ucee4\uc2a4\ud140 \uc5c5\ub85c\ub4dc\ub97c \uc0ac\uc6a9\ud574\uc57c \ud560\uae4c?"}),"\n",(0,a.jsx)(e.h3,{id:"-\uc11c\ubc84-\uc751\ub2f5-\ud615\uc2dd\uc774-\ub2e4\ub978-\uacbd\uc6b0",children:"\ud83d\udd04 \uc11c\ubc84 \uc751\ub2f5 \ud615\uc2dd\uc774 \ub2e4\ub978 \uacbd\uc6b0"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-javascript",children:'// \uc11c\ubc84\uac00 \uc774\ub807\uac8c \uc751\ub2f5\ud558\ub294 \uacbd\uc6b0 ( \uc751\ub2f5 \uc18d\uc131 \uc911 url -> link \uac00 \uc544\ub2cc \uacbd\uc6b0 )\n{\n  "success": true,\n  "data": {\n    "imageUrl": "https://example.com/image.jpg",\n    "imageId": "12345"\n  }\n}\n\n// customImageUploadOptions\ub85c \ucc98\ub9ac\nconst customOptions = {\n  imageBeforeUpload: async (editor, fileList, insertImage) => {\n    const response = await fetch(\'/api/upload\', {\n      method: \'POST\',\n      body: formData\n    });\n    const result = await response.json();\n\n    // \uc751\ub2f5\uc5d0\uc11c \uc774\ubbf8\uc9c0 URL \ucd94\ucd9c\n    insertImage(result.data.imageUrl, false, {}, null, {});\n  }\n};\n'})}),"\n",(0,a.jsx)(e.h3,{id:"-\ud30c\uc77c\uba85-\uc790\ub3d9-\ubcc0\uacbd\uc774-\ud544\uc694\ud55c-\uacbd\uc6b0",children:"\ud83d\udcdd \ud30c\uc77c\uba85 \uc790\ub3d9 \ubcc0\uacbd\uc774 \ud544\uc694\ud55c \uacbd\uc6b0"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:"function AutoRenameUpload() {\n  const [content, setContent] = useState('');\n\n  const autoRenameOptions = {\n    imageBeforeUpload: async (editor, fileList, insertImage) => {\n      // 1. \ud30c\uc77c\uba85\uc744 \ub0a0\uc9dc_\ub79c\ub364\ubb38\uc790\ub85c \ubcc0\uacbd\n      const timestamp = new Date().toISOString().slice(0, 10);\n      const randomId = Math.random().toString(36).substring(2, 8);\n      const extension = file.name.split('.').pop();\n      const newFileName = `image_${timestamp}_${randomId}.${extension}`;\n\n      // 2. \uc0c8\ub85c\uc6b4 \ud30c\uc77c\uba85\uc73c\ub85c \uc5c5\ub85c\ub4dc\n      const formData = new FormData();\n      formData.append('file', file, newFileName);\n\n      const response = await fetch('/api/upload', {\n        method: 'POST',\n        body: formData,\n      });\n\n      const result = await response.json();\n      insertImage(result.url, false, {}, null, {});\n    },\n  };\n\n  return (\n    <FroalaEditor value={content} onChange={setContent} customImageUploadOptions={autoRenameOptions} height={300} />\n  );\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"-\uc5ec\ub7ec-\uc11c\ubc84-\uc911-\uc120\ud0dd\uc774-\ud544\uc694\ud55c-\uacbd\uc6b0",children:"\ud83d\udd04 \uc5ec\ub7ec \uc11c\ubc84 \uc911 \uc120\ud0dd\uc774 \ud544\uc694\ud55c \uacbd\uc6b0"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:"function MultiServerUpload() {\n  const [content, setContent] = useState('');\n\n  const multiServerOptions = {\n    imageBeforeUpload: async (editor, fileList, insertImage) => {\n      // \ud30c\uc77c \ud06c\uae30\uc5d0 \ub530\ub77c \uc11c\ubc84 \uc120\ud0dd\n      const uploadServer =\n        file.size > 1024 * 1024 * 2\n          ? '/api/upload/large' // 2MB \uc774\uc0c1\uc740 \ub300\uc6a9\ub7c9 \uc11c\ubc84\n          : '/api/upload/small'; // 2MB \ubbf8\ub9cc\uc740 \uc77c\ubc18 \uc11c\ubc84\n\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('server_type', file.size > 1024 * 1024 * 2 ? 'large' : 'small');\n\n      const response = await fetch(uploadServer, {\n        method: 'POST',\n        body: formData,\n      });\n\n      const result = await response.json();\n      insertImage(result.image_url, false, {}, null, {});\n    },\n  };\n\n  return (\n    <FroalaEditor value={content} onChange={setContent} customImageUploadOptions={multiServerOptions} height={300} />\n  );\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\uace0\uae09-\ucee4\uc2a4\ud140-\uc5c5\ub85c\ub4dc-\uc608\uc81c",children:"\uace0\uae09 \ucee4\uc2a4\ud140 \uc5c5\ub85c\ub4dc \uc608\uc81c"}),"\n",(0,a.jsx)(e.h3,{id:"\uc9c4\ud589\ub960-\ud45c\uc2dc\uac00-\uc788\ub294-\uc5c5\ub85c\ub4dc",children:"\uc9c4\ud589\ub960 \ud45c\uc2dc\uac00 \uc788\ub294 \uc5c5\ub85c\ub4dc"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:"function ProgressiveUpload() {\n  const [content, setContent] = useState('');\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [isUploading, setIsUploading] = useState(false);\n\n  const progressUploadOptions = {\n    imageBeforeUpload: async (editor, fileList, insertImage) => {\n      setIsUploading(true);\n      setUploadProgress(0);\n\n      return new Promise((resolve, reject) => {\n        const formData = new FormData();\n        formData.append('file', file);\n\n        const xhr = new XMLHttpRequest();\n\n        // \uc5c5\ub85c\ub4dc \uc9c4\ud589\ub960 \ucd94\uc801\n        xhr.upload.addEventListener('progress', (event) => {\n          if (event.lengthComputable) {\n            const percentComplete = (event.loaded / event.total) * 100;\n            setUploadProgress(Math.round(percentComplete));\n          }\n        });\n\n        xhr.addEventListener('load', () => {\n          setIsUploading(false);\n          setUploadProgress(0);\n\n          if (xhr.status === 200) {\n            const response = JSON.parse(xhr.responseText);\n            insertImage(response.url, false, {}, null, {});\n          } else {\n            reject(new Error('\uc5c5\ub85c\ub4dc \uc2e4\ud328'));\n          }\n        });\n\n        xhr.addEventListener('error', () => {\n          setIsUploading(false);\n          setUploadProgress(0);\n          reject(new Error('\ub124\ud2b8\uc6cc\ud06c \uc624\ub958'));\n        });\n\n        xhr.open('POST', '/api/upload/image');\n        xhr.send(formData);\n      });\n    },\n  };\n\n  return (\n    <div>\n      {isUploading && (\n        <div\n          style={{\n            marginBottom: '12px',\n            padding: '8px',\n            backgroundColor: '#e3f2fd',\n            borderRadius: '4px',\n          }}\n        >\n          \ud83d\udce4 \uc5c5\ub85c\ub4dc \uc911... {uploadProgress}%\n          <div\n            style={{\n              width: '100%',\n              height: '4px',\n              backgroundColor: '#e0e0e0',\n              borderRadius: '2px',\n              marginTop: '4px',\n            }}\n          >\n            <div\n              style={{\n                width: `${uploadProgress}%`,\n                height: '100%',\n                backgroundColor: '#2196f3',\n                borderRadius: '2px',\n                transition: 'width 0.3s ease',\n              }}\n            />\n          </div>\n        </div>\n      )}\n\n      <FroalaEditor\n        value={content}\n        onChange={setContent}\n        customImageUploadOptions={progressUploadOptions}\n        height={300}\n      />\n    </div>\n  );\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"\uc774\ubbf8\uc9c0-\uc555\ucd95-\ubc0f-\ub9ac\uc0ac\uc774\uc9d5",children:"\uc774\ubbf8\uc9c0 \uc555\ucd95 \ubc0f \ub9ac\uc0ac\uc774\uc9d5"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:"function CompressedImageUpload() {\n  const [content, setContent] = useState('');\n\n  const compressImage = (file, maxWidth = 1200, quality = 0.8) => {\n    return new Promise((resolve) => {\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      const img = new Image();\n\n      img.onload = () => {\n        // \ube44\uc728 \uc720\uc9c0\ud558\uba70 \ub9ac\uc0ac\uc774\uc9d5\n        const ratio = Math.min(maxWidth / img.width, maxWidth / img.height);\n        canvas.width = img.width * ratio;\n        canvas.height = img.height * ratio;\n\n        // \uc774\ubbf8\uc9c0 \uadf8\ub9ac\uae30\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n        // \uc555\ucd95\ub41c \uc774\ubbf8\uc9c0\ub97c Blob\uc73c\ub85c \ubcc0\ud658\n        canvas.toBlob(resolve, 'image/jpeg', quality);\n      };\n\n      img.src = URL.createObjectURL(file);\n    });\n  };\n\n  const compressedUploadOptions = {\n    imageBeforeUpload: async (editor, fileList, insertImage) => {\n      try {\n        // \uc774\ubbf8\uc9c0 \uc555\ucd95\n        const compressedBlob = await compressImage(file);\n\n        // \uc555\ucd95\ub41c \ud30c\uc77c\ub85c FormData \uc0dd\uc131\n        const formData = new FormData();\n        formData.append('file', compressedBlob, file.name);\n        formData.append('original_size', file.size);\n        formData.append('compressed_size', compressedBlob.size);\n\n        const response = await fetch('/api/upload/compressed-image', {\n          method: 'POST',\n          body: formData,\n        });\n\n        const result = await response.json();\n\n        console.log(`\uc555\ucd95\ub960: ${Math.round((1 - compressedBlob.size / file.size) * 100)}%`);\n\n        insertImage(result.image_url, false, {}, null, {});\n      } catch (error) {\n        console.error('\uc555\ucd95 \uc5c5\ub85c\ub4dc \uc2e4\ud328:', error);\n        throw error;\n      }\n    },\n  };\n\n  return (\n    <FroalaEditor\n      value={content}\n      onChange={setContent}\n      customImageUploadOptions={compressedUploadOptions}\n      height={300}\n      placeholder=\"\uc774\ubbf8\uc9c0\ub294 \uc790\ub3d9\uc73c\ub85c \uc555\ucd95\ub418\uc5b4 \uc5c5\ub85c\ub4dc\ub429\ub2c8\ub2e4...\"\n    />\n  );\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"\uc6cc\ud130\ub9c8\ud06c-\ucd94\uac00-\uc5c5\ub85c\ub4dc",children:"\uc6cc\ud130\ub9c8\ud06c \ucd94\uac00 \uc5c5\ub85c\ub4dc"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:"function WatermarkUpload() {\n  const [content, setContent] = useState('');\n\n  const addWatermark = (file) => {\n    return new Promise((resolve) => {\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      const img = new Image();\n\n      img.onload = () => {\n        canvas.width = img.width;\n        canvas.height = img.height;\n\n        // \uc6d0\ubcf8 \uc774\ubbf8\uc9c0 \uadf8\ub9ac\uae30\n        ctx.drawImage(img, 0, 0);\n\n        // \uc6cc\ud130\ub9c8\ud06c \ucd94\uac00\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\n        ctx.font = '20px Arial';\n        ctx.textAlign = 'right';\n        ctx.fillText('\xa9 NCDS Editor', canvas.width - 20, canvas.height - 20);\n\n        // \uc6cc\ud130\ub9c8\ud06c\uac00 \ucd94\uac00\ub41c \uc774\ubbf8\uc9c0\ub97c Blob\uc73c\ub85c \ubcc0\ud658\n        canvas.toBlob(resolve, 'image/jpeg', 0.9);\n      };\n\n      img.src = URL.createObjectURL(file);\n    });\n  };\n\n  const watermarkUploadOptions = {\n    imageBeforeUpload: async (editor, fileList, insertImage) => {\n      try {\n        // \uc6cc\ud130\ub9c8\ud06c \ucd94\uac00\n        const watermarkedBlob = await addWatermark(file);\n\n        // \uc5c5\ub85c\ub4dc\n        const formData = new FormData();\n        formData.append('file', watermarkedBlob, file.name);\n\n        const response = await fetch('/api/upload/watermarked-image', {\n          method: 'POST',\n          body: formData,\n        });\n\n        const result = await response.json();\n        insertImage(result.watermarked_url, false, {}, null, {});\n      } catch (error) {\n        console.error('\uc6cc\ud130\ub9c8\ud06c \uc5c5\ub85c\ub4dc \uc2e4\ud328:', error);\n        throw error;\n      }\n    },\n  };\n\n  return (\n    <FroalaEditor\n      value={content}\n      onChange={setContent}\n      customImageUploadOptions={watermarkUploadOptions}\n      height={300}\n      placeholder=\"\uc5c5\ub85c\ub4dc\ub41c \uc774\ubbf8\uc9c0\uc5d0 \uc790\ub3d9\uc73c\ub85c \uc6cc\ud130\ub9c8\ud06c\uac00 \ucd94\uac00\ub429\ub2c8\ub2e4...\"\n    />\n  );\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\uc624\ub958-\ucc98\ub9ac-\ubc0f-\uc0ac\uc6a9\uc790-\ud53c\ub4dc\ubc31",children:"\uc624\ub958 \ucc98\ub9ac \ubc0f \uc0ac\uc6a9\uc790 \ud53c\ub4dc\ubc31"}),"\n",(0,a.jsx)(e.h3,{id:"\ud3ec\uad04\uc801\uc778-\uc624\ub958-\ucc98\ub9ac",children:"\ud3ec\uad04\uc801\uc778 \uc624\ub958 \ucc98\ub9ac"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:"function RobustUpload() {\n  const [content, setContent] = useState('');\n  const [notification, setNotification] = useState(null);\n\n  const showNotification = (message, type = 'info') => {\n    setNotification({ message, type });\n    setTimeout(() => setNotification(null), 3000);\n  };\n\n  const robustUploadOptions = {\n    imageBeforeUpload: async (editor, fileList, insertImage) => {\n      try {\n        // 1. \ud30c\uc77c \uc720\ud6a8\uc131 \uac80\uc0ac\n        if (!file || !file.type.startsWith('image/')) {\n          throw new Error('\uc774\ubbf8\uc9c0 \ud30c\uc77c\ub9cc \uc5c5\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4.');\n        }\n\n        if (file.size > 10 * 1024 * 1024) {\n          throw new Error('\ud30c\uc77c \ud06c\uae30\ub294 10MB \uc774\ud558\uc5ec\uc57c \ud569\ub2c8\ub2e4.');\n        }\n\n        showNotification('\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\ub97c \uc2dc\uc791\ud569\ub2c8\ub2e4...', 'info');\n\n        // 2. \uc5c5\ub85c\ub4dc \uc2dc\ub3c4\n        const formData = new FormData();\n        formData.append('file', file);\n\n        const response = await fetch('/api/upload/image', {\n          method: 'POST',\n          body: formData,\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(errorData.message || '\uc5c5\ub85c\ub4dc \uc2e4\ud328');\n        }\n\n        const result = await response.json();\n        showNotification('\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\uac00 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4!', 'success');\n\n        insertImage(result.image_url, false, {}, null, {});\n      } catch (error) {\n        console.error('\uc5c5\ub85c\ub4dc \uc624\ub958:', error);\n        showNotification(error.message, 'error');\n        throw error;\n      }\n    },\n  };\n\n  return (\n    <div>\n      {notification && (\n        <div\n          style={{\n            marginBottom: '12px',\n            padding: '8px 12px',\n            borderRadius: '4px',\n            backgroundColor:\n              notification.type === 'success' ? '#d4edda' : notification.type === 'error' ? '#f8d7da' : '#e3f2fd',\n            border: `1px solid ${\n              notification.type === 'success' ? '#c3e6cb' : notification.type === 'error' ? '#f5c6cb' : '#bbdefb'\n            }`,\n            color: notification.type === 'success' ? '#155724' : notification.type === 'error' ? '#721c24' : '#1565c0',\n          }}\n        >\n          {notification.type === 'success' && '\u2705 '}\n          {notification.type === 'error' && '\u274c '}\n          {notification.type === 'info' && '\u2139\ufe0f '}\n          {notification.message}\n        </div>\n      )}\n\n      <FroalaEditor value={content} onChange={setContent} customImageUploadOptions={robustUploadOptions} height={300} />\n    </div>\n  );\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\uc8fc\uc694-\ud65c\uc6a9-\uc0ac\ub840",children:"\uc8fc\uc694 \ud65c\uc6a9 \uc0ac\ub840"}),"\n",(0,a.jsx)(e.h3,{id:"1-\uc11c\ubc84-\uc751\ub2f5-\ud615\uc2dd\uc774-\ud45c\uc900\uacfc-\ub2e4\ub978-\uacbd\uc6b0",children:"1. \uc11c\ubc84 \uc751\ub2f5 \ud615\uc2dd\uc774 \ud45c\uc900\uacfc \ub2e4\ub978 \uacbd\uc6b0"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"\uae30\uc874 API \uc2dc\uc2a4\ud15c\uacfc\uc758 \ud638\ud658\uc131 \uc720\uc9c0"}),"\n",(0,a.jsx)(e.li,{children:"\ub808\uac70\uc2dc \uc2dc\uc2a4\ud15c \uc5f0\ub3d9"}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"2-\ud30c\uc77c-\ucc98\ub9ac\uac00-\ud544\uc694\ud55c-\uacbd\uc6b0",children:"2. \ud30c\uc77c \ucc98\ub9ac\uac00 \ud544\uc694\ud55c \uacbd\uc6b0"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"\ud30c\uc77c\uba85 \uc790\ub3d9 \ubcc0\uacbd (\uc911\ubcf5 \ubc29\uc9c0)"}),"\n",(0,a.jsx)(e.li,{children:"\uc774\ubbf8\uc9c0 \uc804\ucc98\ub9ac (\uc555\ucd95, \ub9ac\uc0ac\uc774\uc9d5, \uc6cc\ud130\ub9c8\ud06c)"}),"\n",(0,a.jsx)(e.li,{children:"\uba54\ud0c0\ub370\uc774\ud130 \ucd94\uac00"}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"3-\uc5c5\ub85c\ub4dc-\uc11c\ubc84-\uc120\ud0dd\uc774-\ud544\uc694\ud55c-\uacbd\uc6b0",children:"3. \uc5c5\ub85c\ub4dc \uc11c\ubc84 \uc120\ud0dd\uc774 \ud544\uc694\ud55c \uacbd\uc6b0"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"\ud30c\uc77c \ud06c\uae30\ubcc4 \uc11c\ubc84 \ubd84\uc0b0"}),"\n",(0,a.jsx)(e.li,{children:"\uc9c0\uc5ed\ubcc4 CDN \uc120\ud0dd"}),"\n",(0,a.jsx)(e.li,{children:"\ub85c\ub4dc\ubc38\ub7f0\uc2f1"}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"4-\ud2b9\ubcc4\ud55c-\uac80\uc99d\uc774-\ud544\uc694\ud55c-\uacbd\uc6b0",children:"4. \ud2b9\ubcc4\ud55c \uac80\uc99d\uc774 \ud544\uc694\ud55c \uacbd\uc6b0"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"\uc774\ubbf8\uc9c0 \ub0b4\uc6a9 \ubd84\uc11d"}),"\n",(0,a.jsx)(e.li,{children:"\ubc14\uc774\ub7ec\uc2a4 \uac80\uc0ac"}),"\n",(0,a.jsx)(e.li,{children:"\ucee4\uc2a4\ud140 \ud30c\uc77c \uaddc\uce59"}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"customImageUploadOptions"}),"\ub97c \ud65c\uc6a9\ud558\uc5ec \ud504\ub85c\uc81d\ud2b8\uc758 \ud2b9\ubcc4\ud55c \uc694\uad6c\uc0ac\ud56d\uc5d0 \ub9de\ub294 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud574\ubcf4\uc138\uc694! \ud83c\udfaf"]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(g,{...n})}):g(n)}}}]);